# 2026-02-07 è®°å¿†æ—¥å¿—

## ğŸ”§ OpenClaw æºç ä¿®æ”¹

### Token æº¢å‡ºé˜²æŠ¤ç³»ç»Ÿï¼ˆå·²éƒ¨ç½²ï¼?
**é—®é¢˜**ï¼šæ—©ä¸?session å›?token è¶…è¿‡ 200k é™åˆ¶è€Œå´©æº?
**è§£å†³æ–¹æ¡ˆ - ä¸‰å±‚é˜²æŠ¤**ï¼?
1. **70% - é¢„é˜²æ€?Compaction**
   - æ–‡ä»¶ï¼š`src/agents/pi-embedded-runner/run.ts`
   - åœ¨æ¯æ¬?AI è°ƒç”¨å‰æ£€æŸ?session æ–‡ä»¶å¤§å°
   - è‡ªåŠ¨è§¦å‘å‹ç¼©ï¼Œä¸ç­‰æº¢å‡?
2. **80% - Token è­¦å‘Šæ³¨å…¥**
   - æ–‡ä»¶ï¼š`src/agents/pi-embedded-runner/run/attempt.ts`
   - æ³¨å…¥ `<ctx_window>X tokens left</ctx_window>` åˆ?prompt
   - AI å¯æ„ŸçŸ¥å¹¶æé†’ç”¨æˆ·

3. **95% - ç´§æ€¥æç¤?*
   - åœ?AGENTS.md ä¸­æ·»åŠ è¡Œä¸ºè§„åˆ?   - æ¯æ¬¡å›å¤æ˜¾ç¤º ğŸš¨ è­¦å‘Š

### é‡å¯å»¶è¿Ÿä¿®å¤ï¼ˆå·²éƒ¨ç½²ï¼?
**é—®é¢˜**ï¼šgateway restart æ—¶æ¶ˆæ¯æ¥ä¸åŠå‘é€å°±æ–­äº†

**è§£å†³æ–¹æ¡ˆ**ï¼?- æ–‡ä»¶ï¼š`src/infra/restart.ts`
- é»˜è®¤å»¶è¿Ÿä»?2 ç§’æ”¹ä¸?5 ç§?- ç»™æ¶ˆæ¯å‘é€ç•™è¶³å¤Ÿæ—¶é—´

### åˆ?Session ç­–ç•¥ï¼ˆå·²æ·»åŠ åˆ?AGENTS.mdï¼?
- ä¸?Sessionï¼šæ—¥å¸¸å¯¹è¯?- å­?Agentï¼šä»£ç ç”Ÿæˆã€é•¿ä»»åŠ¡ã€æ‰¹å¤„ç†
- è§¦å‘è¯ï¼š"å¸®æˆ‘å†™ä¸€ä¸?.."ã€?åˆ†æè¿™ä¸ª..."

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶æ¸…å?
| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `openclaw_source/src/agents/pi-embedded-runner/run.ts` | é¢„é˜²æ€?compaction |
| `openclaw_source/src/agents/pi-embedded-runner/run/attempt.ts` | Token è­¦å‘Šæ³¨å…¥ |
| `openclaw_source/src/infra/restart.ts` | é‡å¯å»¶è¿Ÿ 5s |
| `E:\UserThinker\AGENTS.md` | Token ç›‘æ§è§„åˆ™ + åˆ?Session ç­–ç•¥ |

## ğŸ’¡ ç»éªŒæ•™è®­

- OpenClaw æ˜?npm åŒ…ä½†æ—¶å…‰æœ‰æºç ï¼Œå¯ä»¥ç›´æ¥æ”?- ç¼–è¯‘å‘½ä»¤ï¼š`pnpm run build`
- éƒ¨ç½²ï¼šå¤åˆ?`dist/` åˆ?`npm/node_modules/openclaw/dist/`
- é‡å¯ï¼š`gateway restart` å·¥å…·

---
*è®°å½•äº?14:42 GMT+8*


